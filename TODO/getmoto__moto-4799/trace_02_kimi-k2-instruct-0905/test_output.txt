+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   moto/core/models.py

no changes added to commit (use "git add" and/or "git commit -a")
+ git show
commit fc1ef55adc7e0c886602149cfe9c1dc04645952b
Author: Roman Rader <roman.rader@gmail.com>
Date:   Thu Jan 27 01:24:51 2022 +0200

    Missing VersionID for versioned buckets in API (#4796)

diff --git a/AUTHORS.md b/AUTHORS.md
index 5f7d047ce..06037aa53 100644
--- a/AUTHORS.md
+++ b/AUTHORS.md
@@ -60,3 +60,4 @@ Moto is written by Steve Pulec with contributions from:
 * [Kyle Jones](https://github.com/Kerl1310)
 * [MickaÃ«l Schoentgen](https://github.com/BoboTiG)
 * [Ariel Beck](https://github.com/arielb135)
+* [Roman Rader](https://github.com/rrader/)
diff --git a/moto/s3/responses.py b/moto/s3/responses.py
index 07b36c4b2..7df1f5b45 100644
--- a/moto/s3/responses.py
+++ b/moto/s3/responses.py
@@ -1272,6 +1272,9 @@ class ResponseObject(_TemplateEnvironmentMixin, ActionAuthenticatorMixin):
         elif key is None:
             raise MissingVersion()
 
+        if key.version_id:
+            response_headers["x-amz-version-id"] = key.version_id
+
         if key.storage_class == "GLACIER":
             raise InvalidObjectState(storage_class="GLACIER")
         if if_unmodified_since:
diff --git a/tests/test_s3/test_s3.py b/tests/test_s3/test_s3.py
index 4bb3b111b..950663ae8 100644
--- a/tests/test_s3/test_s3.py
+++ b/tests/test_s3/test_s3.py
@@ -3562,6 +3562,7 @@ def test_boto3_put_object_tagging_on_earliest_version():
 
     # Older version has tags while the most recent does not
     resp = s3.get_object_tagging(Bucket=bucket_name, Key=key, VersionId=first_object.id)
+    resp["VersionId"].should.equal(first_object.id)
     resp["ResponseMetadata"]["HTTPStatusCode"].should.equal(200)
     sorted_tagset = sorted(resp["TagSet"], key=lambda t: t["Key"])
     sorted_tagset.should.equal(
@@ -3571,6 +3572,7 @@ def test_boto3_put_object_tagging_on_earliest_version():
     resp = s3.get_object_tagging(
         Bucket=bucket_name, Key=key, VersionId=second_object.id
     )
+    resp["VersionId"].should.equal(second_object.id)
     resp["ResponseMetadata"]["HTTPStatusCode"].should.equal(200)
     resp["TagSet"].should.equal([])
 
+ git diff fc1ef55adc7e0c886602149cfe9c1dc04645952b
diff --git a/moto/core/models.py b/moto/core/models.py
index 9a54dd5ed..a8832f844 100644
--- a/moto/core/models.py
+++ b/moto/core/models.py
@@ -115,11 +115,22 @@ class BaseMockAWS:
 
     def decorate_callable(self, func, reset):
         def wrapper(*args, **kwargs):
-            self.start(reset=reset)
-            try:
-                result = func(*args, **kwargs)
-            finally:
-                self.stop()
+            # For test methods, we want to preserve the state from setUp
+            # but reset before the test method runs
+            if reset and hasattr(args[0], 'setUp') and hasattr(args[0], 'tearDown'):
+                # This is a test method, preserve state from setUp
+                self.start(reset=False)
+                try:
+                    result = func(*args, **kwargs)
+                finally:
+                    self.stop()
+            else:
+                # For other methods (setUp, tearDown, etc.), use normal behavior
+                self.start(reset=reset)
+                try:
+                    result = func(*args, **kwargs)
+                finally:
+                    self.stop()
             return result
 
         functools.update_wrapper(wrapper, func)
@@ -169,7 +180,9 @@ class BaseMockAWS:
                 should_reset = False
                 if attr == "setUp":
                     should_reset = True
-                elif not has_setup_method and is_test_method:
+                elif is_test_method:
+                    # Always reset before test methods to ensure proper isolation
+                    # even if the test class inherits setUp from a parent class
                     should_reset = True
                 else:
                     # Method is unrelated to the test setup
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ make init
/opt/miniconda3/envs/testbed/lib/python3.12/site-packages/setuptools/_distutils/dist.py:289: UserWarning: Unknown distribution option: 'test_suite'
  warnings.warn(msg)
/opt/miniconda3/envs/testbed/lib/python3.12/site-packages/setuptools/dist.py:332: InformationOnly: Normalizing '3.0.2.dev' to '3.0.2.dev0'
  self.metadata.version = self._normalize_version(self.metadata.version)
/opt/miniconda3/envs/testbed/lib/python3.12/site-packages/setuptools/dist.py:759: SetuptoolsDeprecationWarning: License classifiers are deprecated.
!!

        ********************************************************************************
        Please consider removing the following classifiers in favor of a SPDX license expression:

        License :: OSI Approved :: Apache Software License

        See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.
        ********************************************************************************

!!
  self._finalize_license_expression()
running develop
/opt/miniconda3/envs/testbed/lib/python3.12/site-packages/setuptools/_distutils/cmd.py:90: DevelopDeprecationWarning: develop command is deprecated.
!!

        ********************************************************************************
        Please avoid running ``setup.py`` and ``develop``.
        Instead, use standards-based tools like pip or uv.

        This deprecation is overdue, please update your project and remove deprecated
        calls to avoid build errors in the future.

        See https://github.com/pypa/setuptools/issues/917 for details.
        ********************************************************************************

!!
  self.initialize_options()
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: boto3>=1.9.201 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.40.74)
Requirement already satisfied: botocore>=1.12.201 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.40.74)
Requirement already satisfied: cryptography>=3.3.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (46.0.3)
Requirement already satisfied: requests>=2.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.32.5)
Requirement already satisfied: xmltodict in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.0.2)
Requirement already satisfied: werkzeug in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.1.3)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2025.2)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.9.0.post0)
Requirement already satisfied: responses>=0.9.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (0.25.8)
Requirement already satisfied: MarkupSafe!=2.0.0a1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.0.3)
Requirement already satisfied: Jinja2>=2.10.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.1.6)
Requirement already satisfied: six>=1.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from python-dateutil<3.0.0,>=2.1->moto==3.0.2.dev0) (1.17.0)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from boto3>=1.9.201->moto==3.0.2.dev0) (1.0.1)
Requirement already satisfied: s3transfer<0.15.0,>=0.14.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from boto3>=1.9.201->moto==3.0.2.dev0) (0.14.0)
Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from botocore>=1.12.201->moto==3.0.2.dev0) (2.5.0)
Requirement already satisfied: cffi>=2.0.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cryptography>=3.3.1->moto==3.0.2.dev0) (2.0.0)
Requirement already satisfied: pycparser in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cffi>=2.0.0->cryptography>=3.3.1->moto==3.0.2.dev0) (2.23)
Requirement already satisfied: charset_normalizer<4,>=2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from requests>=2.5->moto==3.0.2.dev0) (3.4.4)
Requirement already satisfied: idna<4,>=2.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from requests>=2.5->moto==3.0.2.dev0) (3.11)
Requirement already satisfied: certifi>=2017.4.17 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from requests>=2.5->moto==3.0.2.dev0) (2025.11.12)
Requirement already satisfied: pyyaml in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from responses>=0.9.0->moto==3.0.2.dev0) (6.0.3)
Building wheels for collected packages: moto
  Building editable for moto (pyproject.toml): started
  Building editable for moto (pyproject.toml): finished with status 'done'
  Created wheel for moto: filename=moto-3.0.2.dev0-0.editable-py2.py3-none-any.whl size=10758 sha256=f46a12061e7a39a0c881969f1229bf975195fad99c4be3a289c12616f3d72cce
  Stored in directory: /tmp/pip-ephem-wheel-cache-xru9y9_q/wheels/5d/7e/d4/0611b5e1f6b19283dfc03cca62ebc6a41021c5c464d28aab8f
Successfully built moto
Installing collected packages: moto
  Attempting uninstall: moto
    Found existing installation: moto 3.0.2.dev0
    Uninstalling moto-3.0.2.dev0:
      Successfully uninstalled moto-3.0.2.dev0
Successfully installed moto-3.0.2.dev0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: pytest in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 1)) (9.0.1)
Requirement already satisfied: pytest-cov in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 2)) (7.0.0)
Requirement already satisfied: pytest-xdist in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 3)) (3.8.0)
Requirement already satisfied: sure in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 4)) (2.0.1)
Requirement already satisfied: freezegun in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 5)) (1.5.5)
Requirement already satisfied: pylint in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r /testbed/requirements-tests.txt (line 6)) (4.0.3)
Requirement already satisfied: black==19.10b0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 4)) (19.10b0)
Requirement already satisfied: regex==2019.11.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 5)) (2019.11.1)
Requirement already satisfied: flake8==3.7.8 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 6)) (3.7.8)
Requirement already satisfied: click in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 7)) (8.3.1)
Requirement already satisfied: inflection==0.3.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 8)) (0.3.1)
Requirement already satisfied: lxml in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 9)) (6.0.2)
Requirement already satisfied: packaging in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 10)) (25.0)
Requirement already satisfied: prompt_toolkit in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from -r requirements-dev.txt (line 11)) (3.0.52)
Requirement already satisfied: boto3>=1.9.201 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.40.74)
Requirement already satisfied: botocore>=1.12.201 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.40.74)
Requirement already satisfied: cryptography>=3.3.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (46.0.3)
Requirement already satisfied: requests>=2.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.32.5)
Requirement already satisfied: xmltodict in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.0.2)
Requirement already satisfied: werkzeug in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.1.3)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2025.2)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.9.0.post0)
Requirement already satisfied: responses>=0.9.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (0.25.8)
Requirement already satisfied: MarkupSafe!=2.0.0a1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.0.3)
Requirement already satisfied: Jinja2>=2.10.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.1.6)
Requirement already satisfied: PyYAML>=5.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (6.0.3)
Requirement already satisfied: python-jose<4.0.0,>=3.1.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from python-jose[cryptography]<4.0.0,>=3.1.0; extra == "all"->moto==3.0.2.dev0) (3.5.0)
Requirement already satisfied: ecdsa!=0.15 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (0.19.1)
Requirement already satisfied: docker>=2.5.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (7.1.0)
Requirement already satisfied: graphql-core in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.2.7)
Requirement already satisfied: jsondiff>=1.1.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.2.1)
Requirement already satisfied: aws-xray-sdk!=0.96,>=0.93 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (2.15.0)
Requirement already satisfied: idna<4,>=2.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.11)
Requirement already satisfied: cfn-lint>=0.4.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (1.40.4)
Requirement already satisfied: sshpubkeys>=3.1.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.3.1)
Requirement already satisfied: setuptools in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (80.9.0)
Requirement already satisfied: flask in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (3.1.2)
Requirement already satisfied: flask-cors in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from moto==3.0.2.dev0) (6.0.1)
Requirement already satisfied: attrs>=18.1.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from black==19.10b0->-r requirements-dev.txt (line 4)) (25.4.0)
Requirement already satisfied: appdirs in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from black==19.10b0->-r requirements-dev.txt (line 4)) (1.4.4)
Requirement already satisfied: toml>=0.9.4 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from black==19.10b0->-r requirements-dev.txt (line 4)) (0.10.2)
Requirement already satisfied: typed-ast>=1.4.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from black==19.10b0->-r requirements-dev.txt (line 4)) (1.5.5)
Requirement already satisfied: pathspec<1,>=0.6 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from black==19.10b0->-r requirements-dev.txt (line 4)) (0.12.1)
Requirement already satisfied: entrypoints<0.4.0,>=0.3.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flake8==3.7.8->-r requirements-dev.txt (line 6)) (0.3)
Requirement already satisfied: pyflakes<2.2.0,>=2.1.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flake8==3.7.8->-r requirements-dev.txt (line 6)) (2.1.1)
Requirement already satisfied: pycodestyle<2.6.0,>=2.5.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flake8==3.7.8->-r requirements-dev.txt (line 6)) (2.5.0)
Requirement already satisfied: mccabe<0.7.0,>=0.6.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flake8==3.7.8->-r requirements-dev.txt (line 6)) (0.6.1)
Requirement already satisfied: six>=1.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from python-dateutil<3.0.0,>=2.1->moto==3.0.2.dev0) (1.17.0)
Requirement already satisfied: rsa!=4.1.1,!=4.4,<5.0,>=4.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from python-jose<4.0.0,>=3.1.0->python-jose[cryptography]<4.0.0,>=3.1.0; extra == "all"->moto==3.0.2.dev0) (4.9.1)
Requirement already satisfied: pyasn1>=0.5.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from python-jose<4.0.0,>=3.1.0->python-jose[cryptography]<4.0.0,>=3.1.0; extra == "all"->moto==3.0.2.dev0) (0.6.1)
Requirement already satisfied: iniconfig>=1.0.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pytest->-r /testbed/requirements-tests.txt (line 1)) (2.3.0)
Requirement already satisfied: pluggy<2,>=1.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pytest->-r /testbed/requirements-tests.txt (line 1)) (1.6.0)
Requirement already satisfied: pygments>=2.7.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pytest->-r /testbed/requirements-tests.txt (line 1)) (2.19.2)
Requirement already satisfied: coverage>=7.10.6 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from coverage[toml]>=7.10.6->pytest-cov->-r /testbed/requirements-tests.txt (line 2)) (7.11.3)
Requirement already satisfied: execnet>=2.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pytest-xdist->-r /testbed/requirements-tests.txt (line 3)) (2.1.2)
Requirement already satisfied: mock in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from sure->-r /testbed/requirements-tests.txt (line 4)) (5.2.0)
Requirement already satisfied: astroid<=4.1.dev0,>=4.0.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pylint->-r /testbed/requirements-tests.txt (line 6)) (4.0.2)
Requirement already satisfied: dill>=0.3.6 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pylint->-r /testbed/requirements-tests.txt (line 6)) (0.4.0)
Requirement already satisfied: isort!=5.13,<8,>=5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pylint->-r /testbed/requirements-tests.txt (line 6)) (7.0.0)
Requirement already satisfied: platformdirs>=2.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pylint->-r /testbed/requirements-tests.txt (line 6)) (4.5.0)
Requirement already satisfied: tomlkit>=0.10.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pylint->-r /testbed/requirements-tests.txt (line 6)) (0.13.3)
Requirement already satisfied: wcwidth in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from prompt_toolkit->-r requirements-dev.txt (line 11)) (0.2.14)
Requirement already satisfied: wrapt in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from aws-xray-sdk!=0.96,>=0.93->moto==3.0.2.dev0) (2.0.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from boto3>=1.9.201->moto==3.0.2.dev0) (1.0.1)
Requirement already satisfied: s3transfer<0.15.0,>=0.14.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from boto3>=1.9.201->moto==3.0.2.dev0) (0.14.0)
Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from botocore>=1.12.201->moto==3.0.2.dev0) (2.5.0)
Requirement already satisfied: aws-sam-translator>=1.97.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cfn-lint>=0.4.0->moto==3.0.2.dev0) (1.101.0)
Requirement already satisfied: jsonpatch in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cfn-lint>=0.4.0->moto==3.0.2.dev0) (1.33)
Requirement already satisfied: networkx<4,>=2.4 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cfn-lint>=0.4.0->moto==3.0.2.dev0) (3.5)
Requirement already satisfied: sympy>=1.0.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cfn-lint>=0.4.0->moto==3.0.2.dev0) (1.14.0)
Requirement already satisfied: typing_extensions in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cfn-lint>=0.4.0->moto==3.0.2.dev0) (4.15.0)
Requirement already satisfied: jsonschema<5,>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (4.25.1)
Requirement already satisfied: pydantic!=1.10.15,!=1.10.17,<3,>=1.8 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (2.12.4)
Requirement already satisfied: jsonschema-specifications>=2023.03.6 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from jsonschema<5,>=3.2->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (2025.9.1)
Requirement already satisfied: referencing>=0.28.4 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from jsonschema<5,>=3.2->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (0.37.0)
Requirement already satisfied: rpds-py>=0.7.1 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from jsonschema<5,>=3.2->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (0.29.0)
Requirement already satisfied: annotated-types>=0.6.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pydantic!=1.10.15,!=1.10.17,<3,>=1.8->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (0.7.0)
Requirement already satisfied: pydantic-core==2.41.5 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pydantic!=1.10.15,!=1.10.17,<3,>=1.8->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (2.41.5)
Requirement already satisfied: typing-inspection>=0.4.2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from pydantic!=1.10.15,!=1.10.17,<3,>=1.8->aws-sam-translator>=1.97.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (0.4.2)
Requirement already satisfied: cffi>=2.0.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cryptography>=3.3.1->moto==3.0.2.dev0) (2.0.0)
Requirement already satisfied: pycparser in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from cffi>=2.0.0->cryptography>=3.3.1->moto==3.0.2.dev0) (2.23)
Requirement already satisfied: charset_normalizer<4,>=2 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from requests>=2.5->moto==3.0.2.dev0) (3.4.4)
Requirement already satisfied: certifi>=2017.4.17 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from requests>=2.5->moto==3.0.2.dev0) (2025.11.12)
Requirement already satisfied: mpmath<1.4,>=1.1.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from sympy>=1.0.0->cfn-lint>=0.4.0->moto==3.0.2.dev0) (1.3.0)
Requirement already satisfied: blinker>=1.9.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flask->moto==3.0.2.dev0) (1.9.0)
Requirement already satisfied: itsdangerous>=2.2.0 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from flask->moto==3.0.2.dev0) (2.2.0)
Requirement already satisfied: jsonpointer>=1.9 in /opt/miniconda3/envs/testbed/lib/python3.12/site-packages (from jsonpatch->cfn-lint>=0.4.0->moto==3.0.2.dev0) (3.0.0)
Building wheels for collected packages: moto
  Building editable for moto (pyproject.toml): started
  Building editable for moto (pyproject.toml): finished with status 'done'
  Created wheel for moto: filename=moto-3.0.2.dev0-0.editable-py2.py3-none-any.whl size=10758 sha256=c839d5ba9d41d3b3f41fdd9aa8eaae9897b819aca702d20ef6e4196352a92785
  Stored in directory: /tmp/pip-ephem-wheel-cache-i_k93mgk/wheels/5d/7e/d4/0611b5e1f6b19283dfc03cca62ebc6a41021c5c464d28aab8f
Successfully built moto
Installing collected packages: moto
  Attempting uninstall: moto
    Found existing installation: moto 3.0.2.dev0
    Uninstalling moto-3.0.2.dev0:
      Successfully uninstalled moto-3.0.2.dev0
Successfully installed moto-3.0.2.dev0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
+ git checkout fc1ef55adc7e0c886602149cfe9c1dc04645952b tests/test_core/test_decorator_calls.py
Updated 0 paths from 3bed98c2c
+ git apply -v -
Checking patch tests/test_core/test_decorator_calls.py...
Applied patch tests/test_core/test_decorator_calls.py cleanly.
+ pytest -n0 -rA tests/test_core/test_decorator_calls.py
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.1, pluggy-1.6.0
rootdir: /testbed
configfile: setup.cfg
plugins: xdist-3.8.0, cov-7.0.0
collected 20 items

tests/test_core/test_decorator_calls.py F..F.......F.F...F.F             [100%]

=================================== FAILURES ===================================
_____________________________ test_basic_decorator _____________________________

args = (), kwargs = {}

    def wrapper(*args, **kwargs):
        # For test methods, we want to preserve the state from setUp
        # but reset before the test method runs
>       if reset and hasattr(args[0], 'setUp') and hasattr(args[0], 'tearDown'):
                             ^^^^^^^
E       IndexError: tuple index out of range

moto/core/models.py:120: IndexError
_______________________ test_decorater_wrapped_gets_set ________________________

args = (), kwargs = {}

    def wrapper(*args, **kwargs):
        # For test methods, we want to preserve the state from setUp
        # but reset before the test method runs
>       if reset and hasattr(args[0], 'setUp') and hasattr(args[0], 'tearDown'):
                             ^^^^^^^
E       IndexError: tuple index out of range

moto/core/models.py:120: IndexError
_______________ TestWithPublicMethod.test_should_not_find_bucket _______________

self = <tests.test_core.test_decorator_calls.TestWithPublicMethod testMethod=test_should_not_find_bucket>

    def test_should_not_find_bucket(self):
        s3 = boto3.client("s3", region_name="us-east-1")
>       with pytest.raises(ClientError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'botocore.exceptions.ClientError'>

tests/test_core/test_decorator_calls.py:141: Failed
___________ TestWithPseudoPrivateMethod.test_should_not_find_bucket ____________

self = <tests.test_core.test_decorator_calls.TestWithPseudoPrivateMethod testMethod=test_should_not_find_bucket>

    def test_should_not_find_bucket(self):
        s3 = boto3.client("s3", region_name="us-east-1")
>       with pytest.raises(ClientError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'botocore.exceptions.ClientError'>

tests/test_core/test_decorator_calls.py:158: Failed
_ TestWithNestedClasses.NestedClass2.test_should_not_find_bucket_from_different_class _

self = <tests.test_core.test_decorator_calls.TestWithNestedClasses.NestedClass2 testMethod=test_should_not_find_bucket_from_different_class>

    def test_should_not_find_bucket_from_different_class(self):
        s3 = boto3.client("s3", region_name="us-east-1")
>       with pytest.raises(ClientError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'botocore.exceptions.ClientError'>

tests/test_core/test_decorator_calls.py:206: Failed
_ TestWithNestedClasses.TestWithSetup.test_should_not_find_bucket_from_test_method _

self = <tests.test_core.test_decorator_calls.TestWithNestedClasses.TestWithSetup testMethod=test_should_not_find_bucket_from_test_method>

    def test_should_not_find_bucket_from_test_method(self):
        s3 = boto3.client("s3", region_name="us-east-1")
        s3.head_bucket(Bucket="mybucket")
    
>       with pytest.raises(ClientError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'botocore.exceptions.ClientError'>

tests/test_core/test_decorator_calls.py:224: Failed
=============================== warnings summary ===============================
moto/ec2/models.py:218: 114 warnings
tests/test_core/test_decorator_calls.py: 912 warnings
  /testbed/moto/ec2/models.py:218: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return datetime.utcnow().strftime("%Y-%m-%dT%H:%M:%S.000Z")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED tests/test_core/test_decorator_calls.py::test_context_manager
PASSED tests/test_core/test_decorator_calls.py::test_decorator_start_and_stop
PASSED tests/test_core/test_decorator_calls.py::Tester::test_the_class
PASSED tests/test_core/test_decorator_calls.py::Tester::test_still_the_same
PASSED tests/test_core/test_decorator_calls.py::TesterWithSetup::test_still_the_same
PASSED tests/test_core/test_decorator_calls.py::TesterWithStaticmethod::test_no_instance_sent_to_staticmethod
PASSED tests/test_core/test_decorator_calls.py::TestWithSetup::test_should_find_bucket
PASSED tests/test_core/test_decorator_calls.py::TestWithSetup::test_should_not_find_unknown_bucket
PASSED tests/test_core/test_decorator_calls.py::TestWithPublicMethod::test_should_find_bucket
PASSED tests/test_core/test_decorator_calls.py::TestWithPseudoPrivateMethod::test_should_find_bucket
PASSED tests/test_core/test_decorator_calls.py::TestSetUpInBaseClass::test_a_thing
PASSED tests/test_core/test_decorator_calls.py::TestWithNestedClasses::NestedClass::test_should_find_bucket
PASSED tests/test_core/test_decorator_calls.py::TestWithNestedClasses::NestedClass2::test_should_find_bucket
PASSED tests/test_core/test_decorator_calls.py::TestWithNestedClasses::TestWithSetup::test_should_find_bucket
FAILED tests/test_core/test_decorator_calls.py::test_basic_decorator - IndexE...
FAILED tests/test_core/test_decorator_calls.py::test_decorater_wrapped_gets_set
FAILED tests/test_core/test_decorator_calls.py::TestWithPublicMethod::test_should_not_find_bucket
FAILED tests/test_core/test_decorator_calls.py::TestWithPseudoPrivateMethod::test_should_not_find_bucket
FAILED tests/test_core/test_decorator_calls.py::TestWithNestedClasses::NestedClass2::test_should_not_find_bucket_from_different_class
FAILED tests/test_core/test_decorator_calls.py::TestWithNestedClasses::TestWithSetup::test_should_not_find_bucket_from_test_method
================= 6 failed, 14 passed, 1026 warnings in 5.22s ==================
+ git checkout fc1ef55adc7e0c886602149cfe9c1dc04645952b tests/test_core/test_decorator_calls.py
Updated 1 path from 3bed98c2c
